# 功能提取方法指南

## 1. 功能提取概述

功能提取是从现有代码库中识别和整理产品功能的系统性过程。这个过程需要结合代码分析、文档阅读和业务理解，以全面了解产品的功能体系。

## 2. 功能识别策略

### 2.1 基于代码结构的识别

#### API端点分析
- **REST API**: 分析路由定义、HTTP方法、请求/响应结构
- **GraphQL**: 查询schema、mutation、subscription定义
- **RPC服务**: 服务接口定义、方法签名、参数类型

#### 数据模型分析
- **数据库表结构**: 表名、字段、关系、索引
- **ORM模型**: 实体类、关系映射、验证规则
- **数据传输对象**: 请求/响应对象、数据序列化

#### 业务逻辑分析
- **服务类**: 业务服务、领域服务、应用服务
- **工具类**: 通用功能、算法实现、数据处理
- **配置管理**: 功能开关、参数配置、环境设置

### 2.2 基于用户界面的识别

#### 页面结构分析
- **路由配置**: 页面路径、嵌套路由、权限控制
- **组件层次**: 页面组件、业务组件、基础组件
- **布局结构**: 导航结构、内容区域、侧边栏等

#### 交互功能分析
- **表单功能**: 数据录入、验证、提交、重置
- **列表功能**: 数据展示、筛选、排序、分页
- **详情功能**: 信息查看、编辑、删除、操作按钮

#### 用户权限分析
- **角色定义**: 管理员、普通用户、访客等
- **权限控制**: 功能权限、数据权限、操作权限
- **认证机制**: 登录方式、会话管理、令牌验证

### 2.3 基于配置文件的识别

#### 应用配置
- **功能开关**: feature flags、模块开关、实验功能
- **集成配置**: 第三方服务、API密钥、回调地址
- **环境配置**: 开发、测试、生产环境差异

#### 路由配置
- **前端路由**: SPA路由、懒加载、路由守卫
- **后端路由**: API路由、中间件、请求处理
- **微服务路由**: 服务发现、负载均衡、网关配置

## 3. 功能分类方法

### 3.1 按用户价值分类

#### 核心功能 (Core Features)
- **定义**: 产品存在的根本理由，解决主要用户痛点
- **识别标准**:
  - 没有此功能产品就无法使用
  - 用户主要使用场景依赖此功能
  - 竞争对手都有此功能
- **示例**: 电商平台的商品浏览和购买功能

#### 增强功能 (Enhancing Features)
- **定义**: 提升用户体验，增加产品竞争力
- **识别标准**:
  - 让核心功能更好用
  - 提供额外的便利性
  - 差异化竞争优势
- **示例**: 商品推荐、个性化设置

#### 辅助功能 (Supporting Features)
- **定义**: 支持产品运营和管理
- **识别标准**:
  - 用户不直接感知但必要
  - 提升运营效率
  - 保证系统正常运行
- **示例**: 用户管理、数据统计、系统监控

### 3.2 按技术实现分类

#### 前端功能
- **用户界面**: 页面渲染、组件展示、样式效果
- **用户交互**: 事件处理、表单验证、动态效果
- **数据管理**: 状态管理、数据缓存、API调用

#### 后端功能
- **业务逻辑**: 数据处理、业务规则、工作流程
- **数据管理**: 数据存储、查询优化、事务处理
- **系统集成**: 第三方API、消息队列、文件处理

#### 基础设施功能
- **安全认证**: 用户登录、权限验证、数据加密
- **性能优化**: 缓存机制、CDN、负载均衡
- **运维监控**: 日志记录、错误追踪、性能监控

### 3.3 按业务领域分类

#### 用户管理功能
- **注册登录**: 多种登录方式、社交登录、手机验证
- **个人中心**: 资料管理、密码修改、偏好设置
- **权限控制**: 角色管理、功能权限、数据权限

#### 内容管理功能
- **内容创建**: 富文本编辑、多媒体上传、模板选择
- **内容组织**: 分类管理、标签系统、搜索功能
- **内容发布**: 审核流程、定时发布、版本控制

#### 交易管理功能
- **商品管理**: 商品录入、库存管理、价格设置
- **订单处理**: 购物车、下单流程、支付集成
- **售后服务**: 退换货、投诉处理、评价系统

## 4. 功能描述模板

### 4.1 基础功能描述

```markdown
#### [功能名称]

**功能概述**:
[简洁描述功能的主要作用和价值]

**详细描述**:
[详细说明功能的具体内容和工作方式]

**用户价值**:
- [价值点1]
- [价值点2]
- [价值点3]

**技术实现**:
- [主要技术栈]
- [关键算法或逻辑]
- [数据依赖]

**使用场景**:
1. [场景1]: [详细描述]
2. [场景2]: [详细描述]

**相关功能**:
- [依赖功能]
- [被依赖功能]
- [互补功能]
```

### 4.2 API功能描述

```markdown
#### API: [接口名称]

**接口地址**: `[HTTP方法] /path/to/api`

**功能描述**: [接口的主要功能和业务价值]

**请求参数**:
| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| param1 | string | 是 | 参数描述 |
| param2 | number | 否 | 参数描述 |

**响应数据**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    // 响应数据结构
  }
}
```

**错误码**:
| 错误码 | 描述 | 处理建议 |
|--------|------|----------|
| 400 | 请求参数错误 | 检查参数格式和必填项 |
| 401 | 未授权 | 重新登录获取token |
| 403 | 权限不足 | 联系管理员开通权限 |
```

### 4.3 UI功能描述

```markdown
#### 页面: [页面名称]

**页面路径**: `/path/to/page`

**页面描述**: [页面的主要用途和功能]

**页面结构**:
```
┌─────────────────────────────────┐
│           Header                │
├─────────────────────────────────┤
│ Sidebar │     Main Content      │
│         │                       │
│         │                       │
├─────────────────────────────────┤
│           Footer                │
└─────────────────────────────────┘
```

**主要组件**:
- **导航栏**: [功能和交互说明]
- **侧边栏**: [功能和交互说明]
- **内容区**: [功能和交互说明]

**交互功能**:
- [功能1]: [操作方式和结果]
- [功能2]: [操作方式和结果]

**数据来源**:
- [数据来源1]: API接口或数据源
- [数据来源2]: API接口或数据源
```

## 5. 功能关系分析

### 5.1 依赖关系识别

#### 直接依赖
- **数据依赖**: 功能A需要功能B的数据输出
- **逻辑依赖**: 功能A的执行需要功能B先执行
- **界面依赖**: 功能A的界面包含功能B的组件

#### 间接依赖
- **传递依赖**: A依赖B，B依赖C，形成依赖链
- **循环依赖**: A依赖B，B也依赖A（需要重构）
- **条件依赖**: A在某些条件下依赖B

### 5.2 功能矩阵分析

| 功能名称 | 核心功能 | 增强功能 | 辅助功能 | 用户管理 | 内容管理 | 交易管理 |
|----------|----------|----------|----------|----------|----------|----------|
| 用户注册 | ✓ | | | ✓ | | |
| 商品浏览 | ✓ | | | | ✓ | ✓ |
| 订单处理 | ✓ | ✓ | | | ✓ | ✓ |
| 数据统计 | | | ✓ | ✓ | ✓ | ✓ |

### 5.3 功能优先级评估

#### 评估维度
- **用户价值**: 对用户的重要程度
- **使用频率**: 使用的频繁程度
- **技术复杂度**: 实现的技术难度
- **依赖关系**: 对其他功能的影响
- **商业价值**: 对商业目标的贡献

#### 评估方法
```markdown
**功能**: [功能名称]
**用户价值**: [1-5分，1分最低，5分最高]
**使用频率**: [高/中/低]
**技术复杂度**: [高/中/低]
**依赖影响**: [高/中/低]
**商业价值**: [1-5分]
**总分**: [各项加权得分]
**优先级**: [P0/P1/P2/P3]
```

## 6. 工具和技术

### 6.1 代码分析工具
- **静态分析**: ESLint、SonarQube、CodeClimate
- **依赖分析**: npm dependency analyzer、Maven dependency tree
- **代码扫描**: grep、rg、Sourcegraph

### 6.2 文档生成工具
- **API文档**: Swagger/OpenAPI、Postman、Insomnia
- **代码文档**: JSDoc、Sphinx、Javadoc
- **架构图**: PlantUML、Mermaid、draw.io

### 6.3 数据分析工具
- **日志分析**: ELK Stack、Splunk、Fluentd
- **用户行为**: Google Analytics、Mixpanel、Hotjar
- **性能监控**: New Relic、Datadog、Prometheus

## 7. 质量保证

### 7.1 完整性检查
- [ ] 所有主要功能模块都被识别
- [ ] 功能之间的关系都明确
- [ ] 用户界面和业务逻辑对应
- [ ] 配置文件中的功能开关都记录

### 7.2 准确性验证
- [ ] 功能描述与实际代码一致
- [ ] 用户价值判断合理
- [ ] 技术实现分析准确
- [ ] 优先级评估有依据

### 7.3 可维护性
- [ ] 文档结构清晰，便于查找
- [ ] 功能分类逻辑一致
- [ ] 描述模板统一规范
- [ ] 版本信息完整记录