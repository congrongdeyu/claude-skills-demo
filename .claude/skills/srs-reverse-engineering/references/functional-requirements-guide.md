# 功能性需求编写指南

## 1. 功能性需求定义

功能性需求描述系统必须执行的具体动作和功能，定义了系统应该"做什么"。这些需求直接来源于用户的业务需求和产品目标。

## 2. 功能性需求特征

### 2.1 完整性
- 需求描述完整，无遗漏
- 包含所有必要的业务规则
- 覆盖所有用户场景

### 2.2 明确性
- 使用清晰、无歧义的语言
- 避免模糊词汇（如"可能"、"应该"）
- 使用具体的量化和可衡量的描述

### 2.3 可验证性
- 每个需求都可以被测试验证
- 定义明确的验收标准
- 提供可量化的成功指标

### 2.4 一致性
- 与其他需求无冲突
- 与业务目标一致
- 与技术架构兼容

## 3. 功能性需求分类

### 3.1 用户交互需求
描述用户与系统的直接交互

**格式示例：**
```
功能名称：用户登录
功能描述：用户可以通过用户名和密码登录系统
前置条件：用户已注册账号
业务规则：
1. 用户名必须是已注册的有效账号
2. 密码长度为8-20位字符
3. 连续3次登录失败后账号锁定30分钟
输入：用户名、密码
处理：
1. 验证用户名是否存在
2. 验证密码是否正确
3. 检查账号状态
4. 记录登录日志
输出：登录成功/失败信息
异常处理：
- 用户名不存在：显示"用户名或密码错误"
- 密码错误：显示"用户名或密码错误"
- 账号锁定：显示"账号已锁定，请30分钟后重试"
```

### 3.2 数据处理需求
描述系统对数据的操作

**格式示例：**
```
功能名称：订单创建
功能描述：用户可以创建新的订单
前置条件：用户已登录，购物车中有商品
业务规则：
1. 订单金额必须大于0
2. 库存不足的商品无法下单
3. 优惠券必须在有效期内
输入：商品列表、收货地址、支付方式
处理：
1. 验证商品库存
2. 计算订单总金额
3. 应用优惠券折扣
4. 生成订单号
5. 扣减商品库存
输出：订单信息
异常处理：
- 库存不足：提示相应商品库存不足
- 优惠券无效：提示优惠券已过期或不可用
```

### 3.3 业务流程需求
描述复杂的业务流程

**格式示例：**
```
功能名称：退货流程
功能描述：用户可以申请订单退货
前置条件：订单已完成，在退货期限内
业务规则：
1. 虚拟商品不支持退货
2. 已使用的商品不支持退货
3. 退货申请需在收货后7天内提交
输入：订单号、退货原因、退货商品
处理：
1. 验证订单状态和退货期限
2. 审核退货申请
3. 生成退货单号
4. 安排物流取件
5. 收到商品后退款
输出：退货申请结果
异常处理：
- 超过退货期限：提示"已超过退货期限"
- 商品不支持退货：提示"该商品不支持退货"
```

### 3.4 系统管理需求
描述后台管理功能

**格式示例：**
```
功能名称：用户管理
功能描述：管理员可以管理系统用户
前置条件：管理员已登录且有用户管理权限
业务规则：
1. 管理员不能删除超级管理员账号
2. 账号停用后用户无法登录
3. 密码重置后用户首次登录需修改密码
输入：用户ID、操作类型、操作参数
处理：
1. 验证管理员权限
2. 执行相应操作（创建/修改/删除/停用）
3. 记录操作日志
4. 发送通知（如需要）
输出：操作结果
异常处理：
- 权限不足：提示"无权限执行此操作"
- 用户不存在：提示"用户不存在"
```

## 4. 功能性需求编写模板

### 4.1 基础模板
```
## [功能模块名称]

### [具体功能名称]
**功能描述**: [详细描述功能的目的和作用]

**前置条件**:
- [条件1]
- [条件2]

**业务规则**:
1. [规则1]
2. [规则2]
3. [规则3]

**输入数据**:
| 数据项 | 数据类型 | 是否必填 | 约束条件 | 描述 |
|--------|----------|----------|----------|------|
| [数据1] | [类型] | [是/否] | [约束] | [描述] |
| [数据2] | [类型] | [是/否] | [约束] | [描述] |

**处理逻辑**:
1. [步骤1描述]
2. [步骤2描述]
3. [步骤3描述]

**输出数据**:
| 数据项 | 数据类型 | 描述 |
|--------|----------|------|
| [输出1] | [类型] | [描述] |
| [输出2] | [类型] | [描述] |

**异常处理**:
| 异常情况 | 处理方式 | 用户提示 |
|----------|----------|----------|
| [异常1] | [处理] | [提示] |
| [异常2] | [处理] | [提示] |

**验收标准**:
- [标准1]
- [标准2]
- [标准3]
```

### 4.2 复杂功能模板
```
## [复杂功能模块]

### 功能概述
**功能名称**: [功能名称]
**功能描述**: [功能整体描述]
**业务价值**: [该功能为业务带来的价值]

### 用户场景
**主要用户**: [用户类型]
**使用场景**: [使用场景描述]
**使用频率**: [使用频率估计]

### 功能分解
#### 子功能1: [子功能名称]
[使用基础模板描述]

#### 子功能2: [子功能名称]
[使用基础模板描述]

### 业务流程
[使用流程图或编号列表描述完整的业务流程]

### 数据关系
[描述功能涉及的数据实体及其关系]

### 权限控制
[描述不同用户角色的权限差异]

### 性能要求
[描述该功能的性能要求]

### 集成要求
[描述与其他系统的集成要求]
```

## 5. 功能性需求质量检查清单

### 5.1 内容质量
- [ ] 每个功能都有明确的业务价值
- [ ] 功能描述完整，无歧义
- [ ] 业务规则清晰、可执行
- [ ] 输入输出明确定义
- [ ] 异常情况全面考虑

### 5.2 结构质量
- [ ] 功能模块划分合理
- [ ] 层次结构清晰
- [ ] 功能间依赖关系明确
- [ ] 命名规范一致

### 5.3 可测试性
- [ ] 每个需求都有明确的验收标准
- [ ] 可以设计对应的测试用例
- [ ] 测试结果可衡量
- [ ] 测试环境可搭建

### 5.4 可实现性
- [ ] 技术上可实现
- [ ] 资源需求合理
- [ ] 时间计划可行
- [ ] 风险可控

## 6. 常见问题和解决方案

### 6.1 需求过于模糊
**问题**: "系统应该响应速度快"
**解决方案**: "系统在1000并发用户下，95%的请求响应时间小于2秒"

### 6.2 需求过于详细
**问题**: 包含具体的实现细节
**解决方案**: 专注于"做什么"而不是"怎么做"

### 6.3 需求冲突
**问题**: 不同需求之间存在矛盾
**解决方案**: 识别冲突点，与相关方协商解决

### 6.4 需求遗漏
**问题**: 缺少重要的业务场景
**解决方案**: 使用用户故事地图，全面梳理业务流程

## 7. 最佳实践

### 7.1 编写原则
1. **用户中心**: 从用户角度描述需求
2. **结果导向**: 关注功能要达成的结果
3. **分层描述**: 先整体后局部，先概括后详细
4. **场景驱动**: 基于具体使用场景描述需求

### 7.2 协作建议
1. **多方参与**: 产品、开发、测试共同评审
2. **持续更新**: 根据反馈及时调整需求
3. **版本控制**: 记录需求变更历史
4. **工具支持**: 使用专业的需求管理工具

### 7.3 质量保证
1. **需求评审**: 定期组织需求评审会议
2. **原型验证**: 使用原型验证需求理解
3. **用户测试**: 让用户参与需求验证
4. **持续改进**: 总结经验，改进需求编写质量